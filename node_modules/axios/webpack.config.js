const path = require('path');
const busybox = require('busybox');

const modulePath = busybox.utils.node.getModulePath('webpack', __dirname);
if (!modulePath) {
  console.log('modulePath not found!');
  process.exit();
}
const webpack = require(modulePath);
// const webpack = require('webpack');
// console.log(webpack);
var uglifyJsPlugin = webpack.optimize.UglifyJsPlugin;

const name = 'axios.min';

// webpack@"^3.10.0" is needed
module.exports = {
  entry: path.resolve(__dirname, 'index.js'),
  output: {
    path: path.resolve(__dirname, 'dist/'),
    filename: name + '.js',
    // sourceMapFilename: name + '.map',
    library: 'axios',
    libraryTarget: 'umd'
  },
  plugins: [
    new uglifyJsPlugin({
      compress: {
        warnings: false
      }
    })
  ],
};