const fs = require('fs');
const path = require('path');
const busybox = require('busybox');

const webpackBuild = require('../webpack.config.js');

async function start() {
  await webpackBuild();
  const origin = fs.createReadStream(path.resolve(__dirname, 'axios.min.js'));
  const target = fs.createWriteStream(path.resolve(busybox.NODE_MODULES_PATH, 'axios/index.js'));
  origin.pipe(target);
}

try {
  start();
} catch (err) {
  console.log(err);
}