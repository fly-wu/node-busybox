var http = require('http')
var vary = require('vary')

const serve = http.createServer(function onRequest (req, res) {
  console.log(vary.append('Accept, User-Agent', 'Origin'));
  // about to user-agent sniff
  vary(res, 'User-Agent')

  var ua = req.headers['user-agent'] || ''
  var isMobile = /mobi|android|touch|mini/i.test(ua)

  // serve site, depending on isMobile
  res.setHeader('Content-Type', 'text/html')
  res.end('You are (probably) ' + (isMobile ? '' : 'not ') + 'a mobile user')
});

serve.listen(3006);
console.log(`started: http://127.0.0.1:3006`);